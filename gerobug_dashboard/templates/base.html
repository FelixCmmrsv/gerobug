{% load static %}
{% if user.is_authenticated %}

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>{% block title %}Gerobug{% endblock title %}</title>
        <link rel="shortcut icon" href='{% static "favicon.ico" %}' type="image/x-icon">
        <link rel="icon" href='{% static "favicon.ico" %}' type="image/x-icon">

        <!-- CSS -->
        <link rel="stylesheet" href="{% url 'themes' %}" type="text/css">
        <link rel="stylesheet" href='{% static "/css/base.css" %}' type="text/css">
        <link rel="stylesheet" href='{% static "/css/sidebar.css" %}'>

        <!-- BOOTSTRAP CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
              crossorigin="anonymous">
        <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

        <!-- SCRIPTS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
        <script>
            function loadLanguage(language) {
                fetch(`/static/language_pack/${language}.json`)
                    .then(response => response.json())
                    .then(data => {
                        document.querySelectorAll('[data-i18n]').forEach(element => {
                            const key = element.getAttribute('data-i18n');
                            const translation = key.split('.').reduce((obj, i) => obj?.[i], data);
                            if (translation) element.innerText = translation;
                        });
                    })
                    .catch(error => console.error('Error loading language file:', error));
            }

            function setLanguage(event) {
                const language = event.target.value;
                loadLanguage(language);
                localStorage.setItem('selectedLanguage', language);
            }

            document.addEventListener('DOMContentLoaded', () => {
                const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
                document.getElementById('language-select').value = savedLanguage;
                loadLanguage(savedLanguage);
            });
        </script>
    </head>

    <body>
    <!-- <main> -->
    <div class="wrapper">
    <div class="sidebar">
        <div class="logo-details">
            <a href="">
                <img src="{% static 'logo-black.png' %}">
            </a>

        </div>
        <ul class="nav-links">
            <li>
                <a href="{% url 'dashboard' %}">
                    <i class='bx bx-grid-alt'></i>
                    <span data-i18n="base_html.nav_dashboard" class="link_name" class="active">Dashboard</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Dashboard</a></li>
                </ul>
            </li>
            <li>
                <a href="{% url 'report_status' 1 %}">
                    <i class="bi bi-file-earmark-text"></i>
                    <span data-i18n="base_html.nav_need_to_review" class="link_name"
                          class="active">Need To Review</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a data-i18n="base_html." class="link_name" href="{% url 'report_status' 1 %}">Need To
                        Review</a></li>
                </ul>
            </li>
            <li>
                <div class="icon-link">
                    <a href="{% url 'report_status' 1 %}">
                        <i class='bx bx-collection'></i>
                        <span data-i18n="base_html.nav_details" class="link_name">Details</span>
                    </a>
                    <i class='bx bxs-chevron-down arrow'></i>
                </div>
                <ul class="sub-menu">
                    <li><a data-i18n="base_html.sub_menu.details" class="link_name" href="#">Details</a></li>
                    <li><a data-i18n="base_html.sub_menu.need_to_review" href="{% url 'report_status' 1 %}">Need To Review</a>
                    </li>
                    <li><a data-i18n="base_html.sub_menu.in_review" href="{% url 'report_status' 2 %}">In Review</a></li>
                    <li><a data-i18n="base_html.sub_menu.fixing" href="{% url 'report_status' 3 %}">Fixing</a></li>
                    <li><a data-i18n="base_html.sub_menu.retest" href="{% url 'report_status' 4 %}">Retest</a></li>
                    <li><a data-i18n="base_html.sub_menu.bounty_calculation" href="{% url 'report_status' 5 %}">Bounty
                        Calculation</a></li>
                    <li><a data-i18n="base_html.sub_menu.bounty_in_process" href="{% url 'report_status' 6 %}">Bounty in
                        Process</a></li>
                    <li><a data-i18n="base_html.sub_menu.completed" href="{% url 'report_status' 7 %}">Completed</a></li>
                    <li><a data-i18n="base_html.sub_menu.not_valid" href="{% url 'report_status' 0 %}">Not Valid</a></li>
                </ul>
            </li>

            <li>
                <a href="{% url 'setting' %}">
                    <i class='bx bx-cog'></i>
                    <span data-i18n="base_html.nav_setting" class="link_name">Setting</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="{% url 'setting' %}">Setting</a></li>
                </ul>
            </li>

            <li>
                <a href="{% url 'owasp-calculator' %}">
                    <i class="bi bi-calculator-fill"></i>
                    <span data-i18n="base_html.nav_owasp_calculator" class="link_name">OWASP Calculator</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="{% url 'owasp-calculator' %}">OWASP Calculator</a></li>
                </ul>
            </li>

            <li>
                <a href="{% url 'cvss-calculator' %}">
                    <i class="bi bi-calculator-fill"></i>
                    <span data-i18n="base_html.nav_cvss_calculator" class="link_name">CVSS3 Calculator</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="{% url 'cvss-calculator' %}">CVSS3 Calculator</a></li>
                </ul>
            </li>
        </ul>
        <a data-i18n="base_html.bth_logout" class="btn btn-light" href="{% url 'logout' %}" role="button">Logout</a>
        <div id="copyright">
            <p>RTEAM</p>
        </div>
    </div>
{% endif %}
{% block content %}
{% endblock content %}
<!-- </main> -->

<!-- SCRIPTS -->
<script src="{% static '/script/sidebar.js' %}"></script>
</body>
</html>